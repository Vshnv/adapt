<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>DSL - Adapt</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">Adapt</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Adapt</a>
                            </li>
                            <li class="navitem active">
                                <a href="./" class="nav-link">DSL</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href=".." class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" class="nav-link disabled">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#dsl" class="nav-link">DSL</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#adaptscope" class="nav-link">AdaptScope</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#bindscope" class="nav-link">BindScope</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#lifecyclerenewattachable" class="nav-link">LifecycleRenewAttachable</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="dsl">DSL</h1>
<h2 id="adaptscope">AdaptScope</h2>
<p>AdaptScope provides functions for declarations in the adapter. Following are the most important ones:</p>
<h4 id="createcreateview-parent-viewgroup-viewsource">create(createView: (parent: ViewGroup) -&gt; ViewSource<V>)</h4>
<p>This is used as the default view creator when no viewtype if defined or if no viewtype is used.</p>
<pre><code class="language-kotlin">adapt&lt;Person&gt; {
    create {
        val personBinding = LayoutPersonBinding.inflate(LayoutInflater.from(it.context), it, false)
        ViewSource.BindingViewSource(personBinding, ViewBinding::getRoot)
    }.bind { /* ... */ }
}
</code></pre>
<h4 id="createviewtype-int-createview-parent-viewgroup-viewsource">create(viewType: Int, createView: (parent: ViewGroup) -&gt; ViewSource<V>)</h4>
<p>This is used as the creator for the specified <code>viewType</code> (which is an Int). This is to be used in conjunction with <code>defineViewTypes</code>. Refer below for sample for both together.</p>
<h4 id="defineviewtypesmaptoviewtype-data-t-position-int-int">defineViewTypes(mapToViewType: (data: T, position: Int) -&gt; Int)</h4>
<p>Lets you decide the viewtype given some data and position.</p>
<pre><code class="language-kotlin">adapt&lt;Person&gt; {
    defineViewTypes { data, position -&gt;
        if (data.name.startsWith(&quot;A&quot;)) {
            return 1
        } else {
            return 0
        }
    }
    create(0) {
        // view source for type 0
    }.bind { /* ... */ }
    create(1) {
        // view source for type 1
    }.bind { /* ... */ }
}
</code></pre>
<h4 id="contentequalscheckcontentequality-data-t-otherdata-t-boolean">contentEquals(checkContentEquality: (data: T, otherData: T) -&gt; Boolean)</h4>
<p>Returns whether both provided data items are the same. This is used to see if the data has updated and needs to be rebound to the view.</p>
<pre><code class="language-kotlin">adapt&lt;Person&gt; {
    contentEquals { data, otherData -&gt;
        data == otherData
    }
}
</code></pre>
<h4 id="contentequalscheckcontentequality-data-t-otherdata-t-boolean_1">contentEquals(checkContentEquality: (data: T, otherData: T) -&gt; Boolean)</h4>
<p>Returns whether both provided data have the same content. This is used to see if the data has updated and needs to be rebound to the view.</p>
<blockquote>
<p>This is Optional.
The default implementation checks object equality (i.e, (a == b) or Object.equals(a, b) ).
This can ussually be ignored safely while using data classes.</p>
</blockquote>
<pre><code class="language-kotlin">adapt&lt;Person&gt; {
    contentEquals { data, otherData -&gt;
        data == otherData
    }
}
</code></pre>
<h4 id="itemequalscheckequality-data-t-otherdata-t-boolean">itemEquals(checkEquality: (data: T, otherData: T) -&gt; Boolean)</h4>
<p>Returns where the provided items are the same. This is used to know if the items represent the same thing.</p>
<blockquote>
<p>This is Optional.
The default implementation checks reference equality (i.e, (a === b)).
It is advisable to provide an implementation of this item for better performance.</p>
</blockquote>
<pre><code class="language-kotlin">adapt&lt;Person&gt; {
    itemEquals { data, otherData -&gt;
        data.name == otherData.name
    }
}
</code></pre>
<h2 id="bindscope">BindScope</h2>
<h4 id="index-int">index: Int</h4>
<p>Current adapter index for your binding. Is a computed property that fetches the actual current index so its safe to use inside functions. </p>
<blockquote>
<p>Capturing this onto a variable and then using it inside callbacks will result in wrong index used, make sure to use the computed property directly if used inside a callback. This is because the index of the same binding may change due to adapter rearranging due to updated data.</p>
</blockquote>
<pre><code class="language-kotlin">    adapt {
        create { /* ... */ }.bind {
            // val currentIndex = index &lt;-- Do not do this to use inside callbacks like click listeners, 
            // instead directly use index

            binding.myBtn.setOnClickListener {
                // onMyButtonClicked(currentIndex) &lt;-- Do not use this. It may lead to your click listeners using old index even after position changes
                // Instead directly use the index computer property like below
                onMyButtonClicked(index)
            }
        }
    }
</code></pre>
<h4 id="data-t">data: T</h4>
<p>Provides the data to be bound to the current binding</p>
<h4 id="binding-v">binding: V</h4>
<p>Provides the viewtype created provided in the <code>create</code> call, this is the view or binding to which the data must be bound</p>
<h4 id="viewholder-recyclerviewviewholder">viewHolder: RecyclerView.ViewHolder</h4>
<p>Provides the internal viewholder used for the current bind operation, this is provided so as to allow usage with other libraries which require interacting with ViewHolders such as <code>ItemMoveHelper</code>. You can ignore this in most normal cases.</p>
<h2 id="lifecyclerenewattachable">LifecycleRenewAttachable</h2>
<h4 id="withlifecycleattach-bindscopelifecycleowner-unit">withLifecycle(attach: BindScope<T, V>.(LifecycleOwner) -&gt; Unit)</h4>
<p>Provides access to Lifecycle of specific viewholder. This can safely be used to add lifecycle listeners, livedata observers, fetch lifecycleScope's (CoroutineScope scoped to this lifecycle). This is only called once per lifecycle creation. If data for a viewholder changes, the lifecycle is destroyed and a new one is created for which this is called again.</p>
<pre><code class="language-kotlin">    adapt {
        create { /* ... */ }.bind { /* ... */ }.withLifecycle { lifecycleOwner -&gt;
            val friendsLiveData: LiveData&lt;List&lt;Friend&gt;&gt; = myViewModel.fetchFriendsLiveDataForPerson(data.name)

            // Allows listening to livedata with proper lifecycle handling
            friendsLiveData.observe(lifecycleOwner) { friends -&gt;
                binding.details.text = if (friends.isEmpty()) &quot;You have no friends!&quot; else &quot;You have ${friends.size} friends&quot;
            }

            // Allows using coroutineScope scoped to this binding (Requires androidx.lifecycle)
            lifecycleOwner.lifecycleScope.launch(Dispatchers.IO) {
                // ...
            }
        }
    }
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/jquery-3.6.0.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
